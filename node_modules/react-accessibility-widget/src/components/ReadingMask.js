import React, { useEffect, useState } from "react";
import { useAccContext } from "../context/AccessibilityContext";

const ReadingMask = () => {
  const { settings, updateSetting } = useAccContext();
  const [maskPosition, setMaskPosition] = useState(0);

  const handleToggle = () => {
    updateSetting("readingMask", !settings.readingMask);
  };

  useEffect(() => {
    if (settings.readingMask) {
      const handleMouseMove = (event) => {
        setMaskPosition(event.clientY - 50); // Center mask around cursor
      };
      window.addEventListener("mousemove", handleMouseMove);
      return () => window.removeEventListener("mousemove", handleMouseMove);
    }
  }, [settings.readingMask]);

  return (
    <div>
      <label htmlFor="readingMaskToggle">
        Enable Reading Mask
        <input
          type="checkbox"
          id="readingMaskToggle"
          checked={settings.readingMask || false}
          onChange={handleToggle}
        />
      </label>

      {settings.readingMask && <div className="reading-mask" style={{ top: `${maskPosition}px` }} />}
    </div>
  );
};

export default ReadingMask;
